# Author: Muhammed Elyamani
# Date: 03/02/2023
# GitHub: https://github.com/WikiGenius

<MainScreen>:
    detection_image: detection_image
    search_input: search_input
    upload_video_button: upload_video_button
    find_object_button: find_object_button
    FloatLayout:
        Image:
            id: detection_image
            source: './data/upload.png'
            allow_stretch: True
            keep_ratio: True
            opacity: 0.1

        MDTextField:
            id: search_input
            size_hint: 0.5, None
            height: dp(48)
            pos_hint: {'center_x': 0.5, 'top': 0.98}
            hint_text: 'Search...'
            hint_text_color: app.theme_cls.disabled_hint_text_color
            mode: "line"
            icon_right: "magnify"
            icon_right_color: app.theme_cls.primary_color
            line_color_focus: app.theme_cls.primary_color
            line_color_normal: app.theme_cls.primary_color
            fill_color: app.theme_cls.bg_dark
            foreground_color: app.theme_cls.text_color

        MDFillRoundFlatButton:
            id: upload_video_button
            size_hint: 0.1, None
            height: dp(48)
            pos_hint: {'x': 0.05, 'top': 0.95}
            # text: 'Upload Video'
            on_release: app.upload_video()
        
            # Add icon
            MDIcon:
                icon: "./data/upload.png"
                pos_hint: {"center_y": .5}
                size_hint: None, None
                size: self.parent.size
        
        MDFillRoundFlatButton:
            id: find_object_button
            size_hint: 0.1, None
            height: dp(48)
            pos_hint: {'right': 0.95, 'top': 0.95}
            # text: 'Find Object'
            on_release: app.find_object()
        
            # Add icon
            MDIcon:
                icon: "./data/find.png"
                pos_hint: {"center_y": .5}
                size_hint: None, None
                size: self.parent.size

        Image:
            source: './data/logo.png'
            size_hint: 0.2, 0.2
            pos_hint: {'right': 0.95, 'y': 0.05}
<LoadFile>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            path: './assets/videos'
            filters:['*.mp4', '*.avi', '*.3gp', '*.mkv']
            id: filechooser
        BoxLayout:
            size_hint_y: 0.1
            # height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
                font_size:30
            Button:
                text: "Load"
                on_release: app.load(filechooser.path, filechooser.selection[0])
                font_size:30
